<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Introduction </title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Llama-core</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="01-intro.html"><div class="inner"><span>Introduction </span></div></a></li><li class="depth-1 "><a href="02-tutorial.html"><div class="inner"><span>Tutorial</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>llama</span></div></div></li><li class="depth-2 branch"><a href="llama.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="llama.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-2"><a href="llama.testing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>testing</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#introduction" name="introduction"></a>Introduction</h1>
<p>Llama is a lightweight Clojure implementation of Apache Camel, a framework for integrating systems together. It currently provides a Clojure translation of the routing DSL and associated helper methods to work with elements of Camel.</p>
<h2><a href="#status-of-this-work" name="status-of-this-work"></a>Status of this work</h2>
<p>Thanks to the <code>..</code> macro, any expression of the form (route (x foo) (y) (bar z)) is directly translated to the method chain of applying first <code>x</code> then <code>y</code> and then <code>z</code>, meaning, it is equivalent to the Java call <code>x(foo).y().bar(z)</code>. Since this happens to match exactly how the routing DSL works in Java, Llama effectively has full support for the DSL already, but see the next section.</p>
<h3><a href="#clojure-conversions" name="clojure-conversions"></a>Clojure conversions</h3>
<p>Most methods like <code>process</code> in the Java DSL accept anynymous classes based on abstract classes. Llama tries to provide as many macros to make the DSL be more Clojure-like, e.g., <a href="llama.route.html#var-process">process</a> automatically converts its argument to a <code>Processor</code> if it the argument is a function. Similarly, <a href="llama.route.html#var-from">from</a> and <a href="llama.route.html#var-to">to</a> can be called with multiple args and this translated into a call with an <code>Array</code> argument of endpoints.</p>
<p>So, everything that is in the Java API already works, but their usage may be cumbersome, since Camel was written before Java 8 lambdas. Here is a list of the methods that are implemented by a Clojure macro, and their modification:</p>
<ul>
  <li><a href="llama.route.html#var-from">from</a> – accepts varargs</li>
  <li><a href="llama.route.html#var-to">to</a> – ditto</li>
  <li><a href="llama.route.html#var-process">process</a> – accepts a function</li>
  <li><a href="llama.route.html#var-filter">filter</a> – accepts a function</li>
</ul>
<p>The rest of the work is ongoing. The additional benefit of having a macro behind is to provide a suitable doc on this page. For example, the <code>aggregator</code> pattern is not yet implemented, and its parameter is either an <code>Expression</code> or a <code>AggregationStrategy</code>, so you’d need to <code>reify</code> an instance of those classes to get them to work.</p>
<p>Contributions of macros for the routing DSL are welcome!</p>
<h3><a href="#other-features" name="other-features"></a>Other features</h3>
<p>Besides the routing DSL, planned features are to have Consumers and Producers like in <a href="http://doc.akka.io/docs/akka/current/scala/camel.html">Akka Camel</a> using <a href="https://github.com/clojure/core.async">core.async</a> channels, so that you could do </p>
<pre><code class="clj">(def ch (chan))
(defcontext ctx)

(consume-to ctx "activemq:foo:bar" ch)
;; now ch gets messages from activemq
</code></pre></div></div></div></body></html>