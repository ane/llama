<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>llama.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Llama</span> <span class="project-version">0.1.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="01-intro.html"><div class="inner"><span>Introduction </span></div></a></li><li class="depth-1 "><a href="02-tutorial.html"><div class="inner"><span>Tutorial</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>llama</span></div></div></li><li class="depth-2 branch current"><a href="llama.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="llama.route.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>route</span></div></a></li><li class="depth-2"><a href="llama.testing.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>testing</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="llama.core.html#var-body"><div class="inner"><span>body</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-out-capable.3F"><div class="inner"><span>out-capable?</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-reply"><div class="inner"><span>reply</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-request-body"><div class="inner"><span>request-body</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-send-body"><div class="inner"><span>send-body</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-set-body"><div class="inner"><span>set-body</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-string-.3Emessage"><div class="inner"><span>string-&gt;message</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-x-in"><div class="inner"><span>x-in</span></div></a></li><li class="depth-1"><a href="llama.core.html#var-x-out"><div class="inner"><span>x-out</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">llama.core</h1><div class="doc"><div class="markdown"><p>Core utilities for working with Camel endpoints, messages, exchanges, etc.</p></div></div><div class="public anchor" id="var-body"><h3>body</h3><div class="usage"><code>(body msg)</code><code>(body msg clazz)</code></div><div class="doc"><div class="markdown"><p>Get the body of the message <code>msg</code>. </p>
<p>If <code>clazz</code> is provided use a <a href="http://camel.apache.org/type-converter.html">type converter</a> to cast it to <code>clazz</code>. Throws <a href="http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/NoTypeConversionAvailableException.html"><code>NoTypeConversionAvailableException</code></a> if conversion fails because the type converter isnâ€™t in the registry. Throws <code>TypeConversionException</code> if the conversion itself fails.</p>
<p>Uses the context of the exchange of msg. If <code>msg</code> has no exchange and context then the <code>DefaultCamelcontext</code> is used.</p></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L96">view source</a></div></div><div class="public anchor" id="var-out-capable.3F"><h3>out-capable?</h3><div class="usage"><code>(out-capable? x)</code></div><div class="doc"><div class="markdown"><p>If the Exchange in <code>x</code> is an <code>InOut</code> exchange or not.</p></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L25">view source</a></div></div><div class="public anchor" id="var-reply"><h3>reply</h3><div class="usage"><code>(reply exchange body &amp; {:keys [headers id], :or {headers (hash-map), id nil}})</code></div><div class="doc"><div class="markdown"><p>Reply successfully to an exchange with <code>body</code>. <code>body</code> can be a String message or a <a href="http://camel.apache.org/message.html">Message</a>. If <code>body</code> is string it is converted into to a <code>CamelMessage</code> and the optional <code>headers</code> are inserted as the message headers and <code>:id</code> as the message ID. If <code>body</code> is already a Message its headers will be unaltered. See <a href="null">message</a> and <a href="llama.core.html#var-request-body">request-body</a>.</p>
<p><strong>Note</strong>. Reply works only on an <a href="http://camel.apache.org/request-reply.html">InOut</a> Exchange. Does nothing if exchange is <code>InOnly</code>.</p>
<pre><code>(route 
   (from "vm:lol")
   (process (fn [x] (reply x "haha")))
</code></pre></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L30">view source</a></div></div><div class="public anchor" id="var-request-body"><h3>request-body</h3><div class="usage"><code>(request-body ctx endpoint body &amp; {:keys [headers], :or {headers {}}})</code></div><div class="doc"><div class="markdown"><p>Synchronously send to <code>endpoint</code> and expect a reply. Returns the reply.</p>
<p>Send <code>body</code> (String) to <code>endpoint</code> using the <code>InOut</code> pattern. Optionally add  headers in <code>headers</code>.</p>
<pre><code>(route (from "direct:foo")
       (process (fn [x] (reply x "Is it African or European?"))))
  
;; start the route, add to context, etc.

(request-body ctx "direct:foo" "How much weight can an unladen swallow carry?")
;; =&gt; "Is it African or European?"
</code></pre></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L64">view source</a></div></div><div class="public anchor" id="var-send-body"><h3>send-body</h3><div class="usage"><code>(send-body ctx endpoint body &amp; {:keys [headers], :or {headers {}}})</code></div><div class="doc"><div class="markdown"><p>Synchronously send to <code>endpoint</code>.</p>
<p>Sends <code>body</code> (String) to <code>endpoint</code>. Optionally add headers in <code>headers</code>.</p></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L54">view source</a></div></div><div class="public anchor" id="var-set-body"><h3>set-body</h3><div class="usage"><code>(set-body msg body)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L113">view source</a></div></div><div class="public anchor" id="var-string-.3Emessage"><h3>string-&gt;message</h3><div class="usage"><code>(string-&gt;message body &amp; {:keys [id headers], :or {id nil, headers (hash-map)}})</code></div><div class="doc"><div class="markdown"><p>Create a Message, with <code>body</code> String as the body. Optionally with <code>:headers</code> (map) as the headers, and <code>:id</code> as the <a href="http://camel.apache.org/correlation-identifier.html">message id</a>.</p></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L6">view source</a></div></div><div class="public anchor" id="var-x-in"><h3>x-in</h3><div class="usage"><code>(x-in x)</code></div><div class="doc"><div class="markdown"><p>Get the <code>In</code> part of an <code>InOnly</code> or <code>InOut</code> exchange.</p></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L85">view source</a></div></div><div class="public anchor" id="var-x-out"><h3>x-out</h3><div class="usage"><code>(x-out x)</code></div><div class="doc"><div class="markdown"><p>Get the <code>Out</code> part of an <code>InOut</code> exchange. Returns nil if not <code>InOut</code>.</p></div></div><div class="src-link"><a href="http://github.com/ane/llama/blob/master/src/llama/core.clj#L90">view source</a></div></div></div></body></html>